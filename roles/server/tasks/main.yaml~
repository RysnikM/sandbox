---
- name: Update packages
  shell:
    cmd: apt update -y
  tags:
    - update

# - name: Set timezone to Europe/Minsk
#   community.general.timezone:
#     name: Europe/Minsk
#   tags:
#     - timezone

- name: Install packages
  apt:
    name: "{{ apt_packages }}"
    state: latest
    update_cache: yes
  tags:
    - install_packages

- name: Add foldef for code
  file: 
    path: ~/code
    state: directory
    ownew: "{{ sudo_user }}"
  tags:
    - add_folder_code

- name: Add foldef for jenkins
  file: 
    path: ~/jenkins
    state: directory
  tags:
    - jenkins_add_folder
  
# - name: Add any alias
  # shell:
    # cmd: echo "alias cls='clear'" >> ~/.bashrc

- name: Add the sudo user
  user:
    name: "{{ sudo_user }}"
    shell: /bin/bash
    password: "{{s_pass}}"
    groups: sudo
  tags: 
    - add_user

- name: Add user www to sudoers
  shell:
    cmd: echo ""{{ sudo_user }}"  ALL=(ALL) NOPASSWD:ALL" > /etc/sudoers.d/"{{ sudo_user }}"
  tags: 
    - add_user
